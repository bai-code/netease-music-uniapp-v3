import{o as e,c as t,w as a,B as l,F as s,C as i,a as c,b as n,t as r,J as d,D as o,i as p,I as u,f as y,X as m,aa as g,g as f,y as _,m as h,u as x,k as v,l as k,ab as C,ac as b,E as w,q as I}from"./index.88361eb6.js";import{_ as L}from"./_plugin-vue_export-helper.cdc0426e.js";const $=L({__name:"nav-title-select-multiple",props:{titleList:{type:Array,default:()=>[]},scaleRow:{type:Number,default:-1},selectItemList:{type:Array,default:()=>[0,0,1]}},emits:["changeSelect"],setup:(y,{emit:m})=>(g,f)=>{const _=p,h=u;return e(),t(_,{class:"nav-title-select-multiple"},{default:a((()=>[(e(!0),l(s,null,i(y.titleList,((p,u)=>(e(),t(_,{class:"title-container",key:p.id},{default:a((()=>[c(_,{class:"category"},{default:a((()=>[n(r(p.category)+":",1)])),_:2},1024),p.children?(e(),t(h,{key:0,class:"select-item","scroll-x":""},{default:a((()=>[c(_,{class:"select-container"},{default:a((()=>[(e(!0),l(s,null,i(p.children,((l,s)=>(e(),t(_,{class:d(["item",{scale:u===y.scaleRow,active:y.selectItemList[u]===s}]),key:l.id,onClick:e=>((e,t)=>{m("changeSelect",e,t)})(u,s)},{default:a((()=>[n(r(l.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)):o("",!0)])),_:2},1024)))),128))])),_:1})}},[["__scopeId","data-v-4652d1fb"]]),S=L({__name:"singer-list",setup(d){const L=x(),S=y(!1),j=y(""),U=m([0,0,0]),R=g([{id:0,category:"性别",children:[{id:"0-1",text:"全部",type:-1},{id:"0-2",text:"男歌手",type:1},{id:"0-3",text:"女歌手",type:2},{id:"0-4",text:"乐队",type:3}]},{id:1,category:"地区",children:[{id:"1-1",text:"全部",type:-1},{id:"1-2",text:"华语",type:7},{id:"1-3",text:"欧美",type:96},{id:"1-4",text:"日本",type:8},{id:"1-3",text:"韩国",type:16},{id:"1-4",text:"其他",type:0}]},{id:2,category:"字母",children:[{id:"2-0",text:"热门",type:-1},{id:"2-100",text:"#",type:0}]}]),q=g([]);let z=!0,A=!1;const F={type:"",area:"",initial:""},B=async(e,t,a)=>{A=!0;const l=e||F.type,s=t||F.area,i=a||F.initial;q[U[0]]||(q[U[0]]=[]),q[U[0]][U[1]]||(q[U[0]][U[1]]=[]),q[U[0]][U[1]][U[2]]||(q[U[0]][U[1]][U[2]]=[]);const c=q[U[0]][U[1]][U[2]].length,{artists:n,more:r}=await L.dispatch("getInfo",{path:`/artist/list?type=${l}&area=${s}&initial=${i}&limit=30&offset=${c}`});z=r,q[U[0]][U[1]][U[2]].push(...n),A=!1},D=(e,t)=>{U[e]=t};f(U,(([e,t,a])=>{z=!0;const l=R[0].children[e].type,s=R[1].children[t].type,i=R[2].children[a].type;Object.assign(F,{type:l,area:s,initial:i}),B(l,s,i)}),{immediate:!0});let E=0;const J=()=>{z&&!A&&B()};return _((()=>{const e="abcdefghijklmnopqrstuvwxyz",t=e.toUpperCase().split("").map(((t,a)=>({id:`2-${a+1}`,text:t,type:e[a]})));R[2].children.splice(1,0,...t)})),(d,y)=>{const m=v(k("nav-title-select-multiple"),$),g=I,f=p,_=u,x=C,L=b;return e(),t(f,{class:"singer-list"},{default:a((()=>[c(m,{onChangeSelect:D,scaleRow:2,titleList:R,selectItemList:h(U)},null,8,["titleList","selectItemList"]),c(_,{"scroll-y":"true",class:"singer-container",onScrolltolower:J,"lower-threshold":"200"},{default:a((()=>[q[0]?(e(),t(f,{key:0,class:"content"},{default:a((()=>[(e(!0),l(s,null,i(q[h(U)[0]][h(U)[1]][h(U)[2]],(l=>(e(),t(f,{class:"singer-item",key:l.id,onClick:e=>{return t=l.id,void w({url:`/subPackages/singer-detail/singer-detail?id=${t}`});var t}},{default:a((()=>[c(f,{class:"image"},{default:a((()=>[c(g,{src:l.img1v1Url||l.picUrl,"lazy-load":!0,mode:"scaleToFill",onClick:e=>((e,t)=>{const{timeStamp:a}=t;a-E<300&&(j.value=e,S.value=!0),E=a})(l.picUrl,e)},null,8,["src","onClick"])])),_:2},1024),c(f,{class:"singer-name overflow"},{default:a((()=>[n(r(l.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):o("",!0)])),_:1}),S.value?(e(),t(L,{key:0,class:"big-image",onClick:y[0]||(y[0]=e=>S.value=!1)},{default:a((()=>[c(x,{class:"img",src:j.value},null,8,["src"])])),_:1})):o("",!0)])),_:1})}}},[["__scopeId","data-v-c7444961"]]);export{S as default};
