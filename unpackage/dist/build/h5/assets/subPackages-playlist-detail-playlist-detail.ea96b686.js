import{f as a,x as l,e,_ as s,o as t,c,w as o,i as u,a as i,m as n,b as r,t as d,D as f,B as p,C as v,F as m,J as _,u as y,a2 as k,q as g,d as h,V as x,k as I,l as C}from"./index.88361eb6.js";import{_ as b}from"./u--input.eda11477.js";import{_ as w}from"./music-list-table.1b59f8b2.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import"./u-icon.0263866c.js";import"./u-line.c1c06170.js";const F=j({__name:"playlist-detail",setup(j){const F=a(""),T=a(0),U=a(!1),V=a(),D=y(),$=a([]),B=a([]),L=l({}),S=e((()=>k(L.value.playCount||0))),q=e((()=>k(L.value.trackCount||0))),z=()=>{const a=V.value.playMusic;a&&a(0)},E=()=>{(async()=>{const a=B.value.length;if(a>=T.value)return;const{songs:l=[]}=await D.dispatch("getInfo",{path:`/playlist/track/all?id=${F.value}&limit=20&offset=${a}`});B.value.push(...l),$.value=B.value})()},J=a(""),M=()=>{const a=J.value;$.value=B.value.filter((l=>-1!==l.name.indexOf(a)))};return s((a=>{const{pid:l}=a;(async a=>{const{playlist:l={}}=await D.dispatch("getInfo",{path:`/playlist/detail?id=${a}`});L.value=l,B.value=$.value=l.tracks||[],T.value=l.trackCount})(l),F.value=l})),(a,l)=>{const e=g,s=u,y=h,k=x,j=I(C("u--input"),b),F=I(C("music-list-table"),w);return t(),c(s,{class:"playlist-container"},{default:o((()=>[i(s,{class:"info-detail"},{default:o((()=>[i(s,{class:"info left"},{default:o((()=>[i(e,{class:"coverImg",src:n(L).coverImgUrl,mode:"scaleToFill"},null,8,["src"])])),_:1}),i(s,{class:"info right"},{default:o((()=>[i(s,{class:"name"},{default:o((()=>[r(d(n(L).name),1)])),_:1}),n(L).creator?(t(),c(s,{key:0,class:"user-info"},{default:o((()=>[n(L).creator?(t(),c(s,{key:0,class:"img"},{default:o((()=>[i(e,{class:"avatar",src:n(L).creator.avatarUrl,mode:"scaleToFill"},null,8,["src"]),n(L).creator.avatarDetail?(t(),c(e,{key:0,class:"identity",src:n(L).creator.avatarDetail.identityIconUrl,mode:"scaleToFill"},null,8,["src"])):f("",!0)])),_:1})):f("",!0),n(L).creator?(t(),c(s,{key:1,class:"avatar-name overflow"},{default:o((()=>[r(d(n(L).creator.nickname),1)])),_:1})):f("",!0)])),_:1})):f("",!0),i(s,{class:"count"},{default:o((()=>[i(s,{class:"track-count"},{default:o((()=>[r("歌曲:"),i(y,{class:"num"},{default:o((()=>[r(d(n(q)),1)])),_:1})])),_:1}),i(s,null,{default:o((()=>[r("播放:"),i(y,{class:"num"},{default:o((()=>[r(d(n(S)),1)])),_:1})])),_:1})])),_:1}),i(s,{class:"category"},{default:o((()=>[i(y,{class:"cate-title"},{default:o((()=>[r("分类:")])),_:1}),i(s,{class:"cate overflow"},{default:o((()=>[(t(!0),p(m,null,v(n(L).tags,((a,l)=>(t(),c(y,{key:l,class:"overflow"},{default:o((()=>[r(d(a)+" ",1),l!=n(L).tags.length-1?(t(),c(y,{key:0},{default:o((()=>[r("/")])),_:1})):f("",!0)])),_:2},1024)))),128))])),_:1})])),_:1}),n(L).description?(t(),c(s,{key:1,class:"description"},{default:o((()=>[i(s,{class:"desc-title"},{default:o((()=>[r("描述:")])),_:1}),i(s,{class:_(["desc-txt",{single:!U.value}])},{default:o((()=>[r(d(n(L).description),1)])),_:1},8,["class"]),n(L).description.length>9?(t(),c(s,{key:0,class:"icon"},{default:o((()=>[U.value?(t(),c(y,{key:0,class:"iconfont icon-spread",onClick:l[0]||(l[0]=a=>U.value=!1)})):(t(),c(y,{key:1,class:"iconfont icon-pack-up",onClick:l[1]||(l[1]=a=>U.value=!0)}))])),_:1})):f("",!0)])),_:1})):f("",!0)])),_:1})])),_:1}),i(s,{class:"controls"},{default:o((()=>[i(k,{class:"btn",onClick:z},{default:o((()=>[r("播放全部")])),_:1}),i(j,{placeholder:"搜索歌手/歌名",prefixIcon:"search",prefixIconStyle:"font-size: 22px;color: #909399",class:"search",onChange:M,modelValue:J.value,"onUpdate:modelValue":l[2]||(l[2]=a=>J.value=a)},null,8,["modelValue"])])),_:1}),$.value?(t(),c(s,{key:0,class:"music-list"},{default:o((()=>[i(F,{ref_key:"listRef",ref:V,musicList:$.value,showImage:!1,onScrollToBottom:E,isExact:!1},null,8,["musicList"])])),_:1})):f("",!0)])),_:1})}}},[["__scopeId","data-v-8d4d943e"]]);export{F as default};
